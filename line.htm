<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>

<script>
	jQuery(window).load(function () {	
		$(".sandbox1").mousemove(function(e) {
			x=e.clientX-7-507;
			y=e.clientY-7;
			$(".path1").attr("d","M0,0L"+x+","+y+"L0,500Z");
			$(".path2").attr("d","M0,500L"+x+","+y+"L500,500Z");
			$(".path3").attr("d","M500,500L"+x+","+y+"L500,0Z");
			$(".path4").attr("d","M500,0L"+x+","+y+"L0,0Z");
		});




		point=0;
		d=[[20,30],[100,300],[400,20]];
		d.toPath=function(min) { return 'M'+this.join((min==true?'':'  ')+'L'+(min==true?'':' ')); };

		$(".path").attr("d",d.toPath(false));

		$(".sandbox2").mousedown(function(e) {
			lengths=[];
			//Заполняем массив манхеттенской мерой расстояния от мыши до всех точек
			$("circle.dragpoint").each(function(){ lengths.push(Math.abs($(this).attr("cx")-e.clientX)+Math.abs($(this).attr("cy")-e.clientY)); });
			//Сортируем
			point=1; for(i in lengths) if(lengths[i]<lengths[point]) point=i;
			//Отказываемся, если мышь далеко от всех точек
			if(lengths[point]>20) point=0; else point++;
		}).mousemove(function(e) { if(point!="0") {
			x=e.clientX-7;
			y=e.clientY-7;
			d[point-1]=[x,y];
			$("#dragpoint"+point).attr("cx",x).attr("cy",y);
			$(".path").attr("d",d.toPath(false));
		}}).mouseup(function() { point=0; });

		$(".dragpoint").mouseenter(function() {
			// $(this).animate({opacity: 1.0}, 200);
			$(this).attr("opacity",1.0);
		}).mouseleave(function() {
			// $(this).animate({opacity: 0.0}, 200);
			$(this).attr("opacity",0.0);
		});
	});
</script>

<style>
	body { width: 1100px; }

	.sandbox1, .sandbox2 {
		display: inline-block;
		width: 500px;
		height: 500px;
		border: 1px solid #000;
	}

	svg path, svg circle { stroke: #000; }

	.dragpoint { stroke: #000; fill:#fff; }
</style>

<svg class="sandbox2">
	<path class="path" fill="#fff"/>
	<circle class="dragpoint" id="dragpoint1" cx="20" cy="30" r="7" opacity="0.0"/>
	<circle class="dragpoint" id="dragpoint2" cx="100" cy="300" r="7" opacity="0.0"/>
	<circle class="dragpoint" id="dragpoint3" cx="400" cy="20" r="7" opacity="0.0"/>
</svg>

<svg class="sandbox1">
	<path class="path1" d="M0,0L250,250L0,500Z" fill="#ff0"/>
	<path class="path2" d="M0,500L250,250L500,500Z" fill="#f00"/>
	<path class="path3" d="M500,500L250,250L500,0Z" fill="#0f0"/>
	<path class="path4" d="M500,0L250,250L0,0Z" fill="#00f"/>
</svg>